<!DOCTYPE html><html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Golf Scorecard</title>
<style>
  :root{
    --bg:#0b1320;--panel:#121a2b;--muted:#7b8bb2;--text:#e8edf8;--accent:#4cc38a;--accent-2:#7c9cff;--danger:#ff6b6b;--card:#0f172a;
    --ring:#3b82f6;--border:#23304a;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Inter,Arial,sans-serif;background:var(--bg);color:var(--text)}
  header{position:sticky;top:0;background:linear-gradient(180deg,var(--panel),rgba(18,26,43,.9));backdrop-filter:blur(6px);z-index:5;border-bottom:1px solid var(--border)}
  .wrap{max-width:1200px;margin:0 auto;padding:16px}
  h1{margin:0 0 8px;font-size:clamp(20px,3vw,28px)}
  .muted{color:var(--muted)}.card{background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.01));border:1px solid var(--border);border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,.25)} .panel{padding:16px} .grid{display:grid;gap:12px} .grid.cols-4{grid-template-columns:repeat(4,minmax(0,1fr))} .grid.cols-5{grid-template-columns:repeat(5,minmax(0,1fr))} label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px} input[type="number"], input[type="text"], select{ width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:var(--card);color:var(--text);outline:0;transition:border .15s, box-shadow .15s } input:focus{border-color:var(--ring);box-shadow:0 0 0 3px rgba(59,130,246,.25)} .row{display:flex;gap:10px;align-items:center} .btn{appearance:none;border:1px solid var(--border);background:var(--card);color:var(--text);padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:600} .btn.primary{background:linear-gradient(180deg,var(--accent-2),#4e7dfc);border-color:#375fde;color:#fff} .btn.ghost{background:transparent} .btn:disabled{opacity:.5;cursor:not-allowed} .hint{font-size:12px;color:var(--muted)}

/* Tabs */ .tabs{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px} .tab{padding:8px 12px;border:1px solid var(--border);border-radius:999px;background:var(--card);cursor:pointer} .tab.active{background:var(--accent-2);border-color:#375fde;color:#fff}

/* Tables */ .table-wrap{overflow:auto} table{border-collapse:separate;border-spacing:0;width:max-content;min-width:100%;background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.01));border:1px solid var(--border);border-radius:12px;overflow:hidden} th,td{padding:8px 10px;border-bottom:1px solid var(--border);text-align:center} thead th{position:sticky;top:0;background:var(--panel);z-index:2} tbody tr:hover td{background:rgba(255,255,255,.03)} tfoot td{background:rgba(255,255,255,.03);font-weight:700} .left{text-align:left} .hole-input{width:56px} .name-input{min-width:160px} .chip{display:inline-block;padding:2px 8px;border-radius:999px;font-size:12px;border:1px solid var(--border);background:var(--card)} .par-good{color:var(--accent)} .par-bad{color:var(--danger)}

.players-bar{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px} .players-bar .chip{cursor:text}

.footer{display:flex;justify-content:space-between;align-items:center;margin-top:14px} .totals{display:flex;gap:12px;flex-wrap:wrap} .totals .card{padding:10px 12px}

/* Print */ @media print{ header, .no-print{display:none} body{background:#fff;color:#000} .card, table, th, td{border-color:#ddd} } </style>

</head>
<body>
  <header>
    <div class="wrap">
      <h1>Golf Scorecard</h1>
      <div class="muted">Configure your round(s), then record strokes per hole like a real scorecard. Data is saved locally.</div>
    </div>
  </header>  <main class="wrap">
    <!-- Setup Card -->
    <section class="card panel" id="setup">
      <div class="grid cols-5">
        <div>
          <label for="course">Course name</label>
          <input id="course" type="text" placeholder="e.g., St Andrews – Old Course" />
        </div>
        <div>
          <label for="players">Players</label>
          <input id="players" type="number" min="1" max="8" value="2" />
        </div>
        <div>
          <label for="rounds">Rounds</label>
          <input id="rounds" type="number" min="1" max="10" value="1" />
        </div>
        <div>
          <label for="holes">Holes per round</label>
          <select id="holes">
            <option value="18" selected>18</option>
            <option value="9">9</option>
            <option value="12">12</option>
            <option value="27">27</option>
          </select>
        </div>
        <div class="row" style="align-self:end; gap:8px">
          <button class="btn ghost" id="resetAll" title="Clear everything">Reset</button>
          <button class="btn primary" id="generate">Generate scorecards</button>
        </div>
      </div>
      <div class="hint" style="margin-top:8px">Tip: click a player name to edit it. Use your keyboard arrows to move across holes quickly.</div>
    </section><!-- Players quick edit -->
<section class="card panel" id="playersBar" style="display:none"></section>

<!-- Tabs + Score tables -->
<section id="workspace" style="margin-top:14px"></section>

<!-- Overall summary -->
<section class="card panel" id="summary" style="display:none; margin-top:14px"></section>

<div class="footer no-print">
  <div class="totals" id="footerTotals"></div>
  <div class="row">
    <button class="btn" onclick="window.print()">Print</button>
    <button class="btn" id="exportJson">Export JSON</button>
    <input type="file" id="importJson" accept="application/json" style="display:none" />
    <button class="btn" id="importBtn">Import JSON</button>
  </div>
</div>

  </main><script>
(function(){
  const storageKey = 'golf-scorecard-html-v1';
  // State
  let state = {
    courseName: '',
    numPlayers: 2,
    numRounds: 1,
    numHoles: 18,
    playerNames: ['Player 1','Player 2'],
    // parByRound[r][h]
    parByRound: [],
    // scores[r][p][h]
    scores: [],
    generated: false,
    activeRound: 0,
  };

  // Elements
  const el = (id) => document.getElementById(id);
  const $course = el('course');
  const $players = el('players');
  const $rounds = el('rounds');
  const $holes = el('holes');
  const $generate = el('generate');
  const $resetAll = el('resetAll');
  const $playersBar = el('playersBar');
  const $workspace = el('workspace');
  const $summary = el('summary');
  const $footerTotals = el('footerTotals');
  const $exportJson = el('exportJson');
  const $importJson = el('importJson');
  const $importBtn = el('importBtn');

  // Utils
  const clamp = (n,min,max)=>Math.max(min,Math.min(max,n));
  const save = ()=>localStorage.setItem(storageKey, JSON.stringify(state));
  const load = ()=>{
    try{
      const saved = JSON.parse(localStorage.getItem(storageKey)||'null');
      if(!saved) return;
      state = { ...state, ...saved };
      applySetupToInputs();
      if(state.generated){
        renderAll();
      }
    }catch(e){console.warn('load failed',e)}
  }
  const reset = ()=>{ localStorage.removeItem(storageKey); location.reload(); }

  function applySetupToInputs(){
    $course.value = state.courseName || '';
    $players.value = state.numPlayers;
    $rounds.value = state.numRounds;
    $holes.value = String(state.numHoles);
  }

  function initArrays(){
    const r = clamp(state.numRounds,1,10);
    const p = clamp(state.numPlayers,1,8);
    const h = clamp(state.numHoles,3,27);
    state.numRounds=r; state.numPlayers=p; state.numHoles=h;

    state.parByRound = Array.from({length:r},()=>Array.from({length:h},()=>4));
    state.scores = Array.from({length:r},()=>
      Array.from({length:p},()=>Array.from({length:h},()=>4))
    );
    if(state.playerNames.length!==p){
      state.playerNames = Array.from({length:p},(_,i)=> state.playerNames[i] || `Player ${i+1}`);
    }
    state.activeRound=0;
  }

  // Setup events
  $generate.addEventListener('click',()=>{
    state.courseName = $course.value.trim();
    state.numPlayers = clamp(parseInt($players.value||'2',10),1,8);
    state.numRounds = clamp(parseInt($rounds.value||'1',10),1,10);
    state.numHoles = clamp(parseInt($holes.value||'18',10),3,27);
    initArrays();
    state.generated = true;
    save();
    renderAll();
  });
  $resetAll.addEventListener('click', reset);

  $exportJson.addEventListener('click', ()=>{
    const blob = new Blob([JSON.stringify(state,null,2)],{type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href=url; a.download=`golf-scorecard-${Date.now()}.json`; a.click();
    URL.revokeObjectURL(url);
  });
  $importBtn.addEventListener('click',()=> $importJson.click());
  $importJson.addEventListener('change', async (e)=>{
    const file = e.target.files[0];
    if(!file) return;
    try{
      const txt = await file.text();
      const data = JSON.parse(txt);
      state = { ...state, ...data };
      applySetupToInputs();
      renderAll();
      save();
    }catch(err){ alert('Invalid JSON file.'); }
    $importJson.value='';
  });

  function renderAll(){
    renderPlayersBar();
    renderWorkspace();
    renderSummary();
    renderFooterTotals();
  }

  function renderPlayersBar(){
    if(!state.generated){ $playersBar.style.display='none'; return; }
    $playersBar.style.display='block';
    $playersBar.innerHTML = `
      <div class="row" style="justify-content:space-between; align-items:center">
        <div>
          <div class="muted">Course</div>
          <div style="font-weight:700">${state.courseName || '—'}</div>
        </div>
        <div style="flex:1"></div>
        <div>
          <div class="muted">Players</div>
          <div class="players-bar" id="playersChips"></div>
        </div>
      </div>`;
    const chips = $playersBar.querySelector('#playersChips');
    chips.innerHTML = '';
    state.playerNames.forEach((name,idx)=>{
      const span = document.createElement('span');
      span.className = 'chip';
      span.contentEditable = 'true';
      span.textContent = name;
      span.title = 'Click to edit player name';
      span.addEventListener('blur',()=>{
        const v = (span.textContent||'').trim() || `Player ${idx+1}`;
        state.playerNames[idx]=v; save();
        renderSummary();
      });
      chips.appendChild(span);
    });
  }

  function renderWorkspace(){
    if(!state.generated){ $workspace.innerHTML=''; return; }
    // Tabs
    const tabs = Array.from({length: state.numRounds},(_,i)=>
      `<button class="tab ${i===state.activeRound?'active':''}" data-r="${i}">Round ${i+1}</button>`
    ).join('');

    // Table for active round
    const r = state.activeRound;
    const holes = state.numHoles;

    const headerHoles = Array.from({length:holes},(_,i)=>`<th>H${i+1}</th>`).join('');
    const parInputs = Array.from({length:holes},(_,h)=>
      `<td><input class="hole-input" type="number" min="3" max="6" value="${state.parByRound[r][h]}" data-role="par" data-h="${h}" /></td>`
    ).join('');

    const playerRows = state.playerNames.map((name,pIdx)=>{
      const tds = Array.from({length:holes},(_,h)=>{
        const v = state.scores[r][pIdx][h];
        return `<td><input class="hole-input" type="number" min="1" max="15" value="${v}" data-role="stroke" data-p="${pIdx}" data-h="${h}" /></td>`;
      }).join('');
      const {total,toPar,front9,back9} = computeRoundTotals(r,pIdx);
      const toParCls = toPar<0? 'par-good' : (toPar>0? 'par-bad' : '');
      return `<tr>
        <td class="left"><input class="name-input" value="${name}" data-role="rename" data-p="${pIdx}" /></td>
        ${tds}
        <td>${front9}</td>
        <td>${back9}</td>
        <td><span class="${toParCls}">${total} (${toPar>=0?'+':''}${toPar})</span></td>
      </tr>`;
    }).join('');

    const parTotals = computeParTotals(r);

    $workspace.innerHTML = `
      <div class="tabs">${tabs}</div>
      <div class="table-wrap" style="margin-top:10px">
        <table>
          <thead>
            <tr>
              <th class="left">Player</th>
              ${headerHoles}
              <th>Out</th><th>In</th><th>Total (±Par)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="left muted">Par</td>
              ${parInputs}
              <td>${parTotals.front9}</td>
              <td>${parTotals.back9}</td>
              <td>${parTotals.total}</td>
            </tr>
            ${playerRows}
          </tbody>
        </table>
      </div>
    `;

    // Bind interactions
    $workspace.querySelectorAll('.tab').forEach(btn=>{
      btn.addEventListener('click',()=>{ state.activeRound=parseInt(btn.dataset.r,10); save(); renderWorkspace(); renderSummary(); })
    });

    $workspace.querySelectorAll('input[data-role="par"]').forEach(inp=>{
      inp.addEventListener('input',()=>{
        const h = parseInt(inp.dataset.h,10);
        state.parByRound[r][h] = clamp(parseInt(inp.value||'4',10),1,20);
        save();
        renderWorkspace(); // refresh totals and par row
        renderSummary();
      })
    });

    $workspace.querySelectorAll('input[data-role="stroke"]').forEach(inp=>{
      inp.addEventListener('input',()=>{
        const p = parseInt(inp.dataset.p,10);
        const h = parseInt(inp.dataset.h,10);
        state.scores[r][p][h] = clamp(parseInt(inp.value||'0',10),0,30);
        save();
        renderWorkspace();
        renderSummary();
      })
    });

    $workspace.querySelectorAll('input[data-role="rename"]').forEach(inp=>{
      inp.addEventListener('blur',()=>{
        const p = parseInt(inp.dataset.p,10);
        state.playerNames[p] = (inp.value||'').trim() || `Player ${p+1}`;
        save();
        renderPlayersBar();
        renderWorkspace();
        renderSummary();
      })
    });
  }

  function computeParTotals(r){
    const par = state.parByRound[r];
    const sum = (arr)=>arr.reduce((a,b)=>a+(+b||0),0);
    const front9 = sum(par.slice(0, Math.min(9, par.length)));
    const back9 = par.length>9 ? sum(par.slice(9)) : 0;
    return { front9, back9, total: sum(par) };
  }

  function computeRoundTotals(r,p){
    const strokes = state.scores[r][p];
    const par = state.parByRound[r];
    const sum = (arr)=>arr.reduce((a,b)=>a+(+b||0),0);
    const total = sum(strokes);
    const toPar = total - sum(par);
    const front9 = sum(strokes.slice(0, Math.min(9, strokes.length)));
    const back9 = strokes.length>9 ? sum(strokes.slice(9)) : 0;
    return { total, toPar, front9, back9 };
  }

  function computeOverallForPlayer(p){
    const sum = (a)=>a.reduce((x,y)=>x+y,0);
    let total=0, parTotal=0;
    for(let r=0;r<state.numRounds;r++){
      total += state.scores[r][p].reduce((x,y)=>x+(+y||0),0);
      parTotal += state.parByRound[r].reduce((x,y)=>x+(+y||0),0);
    }
    return { total, parTotal, toPar: total - parTotal };
  }

  function renderSummary(){
    if(!state.generated){ $summary.style.display='none'; return; }
    $summary.style.display='block';
    const rows = state.playerNames.map((name,p)=>{
      const { total, parTotal, toPar } = computeOverallForPlayer(p);
      const cls = toPar<0? 'par-good' : (toPar>0? 'par-bad' : '');
      return `<tr>
        <td class="left">${name}</td>
        <td>${total}</td>
        <td>${parTotal}</td>
        <td><span class="${cls}">${toPar>=0?'+':''}${toPar}</span></td>
      </tr>`
    }).join('');

    $summary.innerHTML = `
      <h3 style="margin:0 0 10px">Overall Summary</h3>
      <div class="table-wrap">
        <table>
          <thead>
            <tr><th class="left">Player</th><th>Strokes</th><th>Par</th><th>±Par</th></tr>
          </thead>
          <tbody>${rows}</tbody>
        </table>
      </div>
    `;
  }

  function renderFooterTotals(){
    if(!state.generated){ $footerTotals.innerHTML=''; return; }
    const r = state.activeRound;
    const par = computeParTotals(r).total;
    const cards = state.playerNames.map((name,p)=>{
      const { total, toPar } = computeRoundTotals(r,p);
      const tag = toPar>0? `+${toPar}` : `${toPar}`;
      return `<div class="card"><div class="muted" style="font-size:12px">Round ${r+1}</div><div style="font-weight:700">${name}</div><div class="muted">Total: ${total} / Par: ${par} (<span class="${toPar<0?'par-good':(toPar>0?'par-bad':'')}">${tag}</span>)</div></div>`
    }).join('');
    $footerTotals.innerHTML = cards;
  }

  // Boot
  load();
})();
</script></body>
  </html>
